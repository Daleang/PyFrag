#! /bin/sh
#----------------------------------------------------------
#parse the command line for flags, should precede arguments
#----------------------------------------------------------
unset HELP
unset EXECUTABLE
#
while [ ! -z "$1" ]
do
    case $1 in
    -h)
        HELP=1
        shift;
        ;;
    -x)
        EXECUTABLE=$2
        shift;
        shift;
        ;;
    -s)
        SILENCE="True"
        shift;
        ;;
    *)
        break;
        ;;
    esac
done
#
#----------------------
#print help information
#----------------------
if test ! -z "$HELP"
then
    echo "Usage: $0 [-h] [-x command] [...]"
    echo " "
    echo "       -h          : print this information"
    echo "       -x command  : start the executable named command"
    echo "                   : command include restart, which restart job"
    echo "                   : check, which check job result"
    echo "                   : end, which terminate job"
    echo "                   : summary, which summary job result"
    echo "                   : default command is pyfrag"
    echo "The example command like this:"
    echo "$0 job.in"
    echo "or"
    echo "$0 -x restart job.in"

    exit 1
fi


if test -z "$SILENCE"; then
    if test -x "$PYFRAGHOME/bin/$EXECUTABLE.sh";
    then
        exec "$PYFRAGHOME/bin/$EXECUTABLE.sh"  "$@"
    else
        exec "$0.sh"  "$@"
    fi
else
    if test -x "$PYFRAGHOME/bin/$EXECUTABLE.sh";
    then
        exec "$PYFRAGHOME/bin/$EXECUTABLE.sh"  "$@" &>/dev/null
    else
        exec "$0.sh"  "$@" &>/dev/null
    fi
fi
